{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DAN\\\\Desktop\\\\fullProject\\\\frontend-react\\\\frontend-react\\\\src\\\\components\\\\ShadingPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { listAreasWithShading, attachShading, setShading } from \"../api/shading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ShadingPanel() {\n  _s();\n  const [rows, setRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [busy, setBusy] = useState(null);\n  const load = async () => {\n    setLoading(true);\n    try {\n      const data = await listAreasWithShading();\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const ensureAttach = async area_id => {\n    try {\n      await attachShading(area_id);\n    } catch {}\n  };\n  const toggle = async (area_id, currStatus) => {\n    try {\n      setBusy(area_id);\n      await ensureAttach(area_id);\n      const next = currStatus === \"open\" ? \"closed\" : \"open\";\n      await setShading(area_id, next, true);\n      await load();\n    } finally {\n      setBusy(null);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u05D8\\u05D5\\u05E2\\u05DF \\u05D4\\u05E6\\u05DC\\u05DC\\u05D4...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid #eee\",\n      padding: 16,\n      borderRadius: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"\\u05DE\\u05E2\\u05E8\\u05DB\\u05D5\\u05EA \\u05D4\\u05E6\\u05DC\\u05DC\\u05D4 \\u05DC\\u05E4\\u05D9 \\u05D0\\u05D6\\u05D5\\u05E8\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: \"2fr 1fr 1fr 1fr\",\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u05D0\\u05D6\\u05D5\\u05E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u05E1\\u05D8\\u05D8\\u05D5\\u05E1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u05D0\\u05D9\\u05E0\\u05D3\\u05D9\\u05E7\\u05D8\\u05D5\\u05E8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\u05E4\\u05E2\\u05D5\\u05DC\\u05D4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), rows.map(r => {\n        const color = r.status === \"open\" ? \"#22c55e\" : \"#9ca3af\";\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"contents\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: r.area_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: r.status === \"open\" ? \"פתוח\" : \"סגור\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                width: 10,\n                height: 10,\n                borderRadius: \"50%\",\n                background: color,\n                display: \"inline-block\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this), r.added_by_user ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 12,\n                padding: \"2px 8px\",\n                borderRadius: 9999,\n                background: \"#eef\",\n                border: \"1px solid #dde\"\n              },\n              children: \"\\u05E0\\u05D5\\u05E1\\u05E3 \\u05E2\\\"\\u05D9 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => toggle(r.area_id, r.status),\n              disabled: busy === r.area_id,\n              style: {\n                padding: \"6px 12px\",\n                borderRadius: 8,\n                border: \"1px solid #ddd\",\n                cursor: busy === r.area_id ? \"not-allowed\" : \"pointer\",\n                background: \"#fafafa\"\n              },\n              children: busy === r.area_id ? \"מבצע...\" : r.status === \"open\" ? \"סגור\" : \"פתח\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, r.area_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(ShadingPanel, \"w7pXTKCdFMhz+qw1TIVxzy4OHi0=\");\n_c = ShadingPanel;\nvar _c;\n$RefreshReg$(_c, \"ShadingPanel\");","map":{"version":3,"names":["React","useEffect","useState","listAreasWithShading","attachShading","setShading","jsxDEV","_jsxDEV","ShadingPanel","_s","rows","setRows","loading","setLoading","busy","setBusy","load","data","Array","isArray","e","console","error","ensureAttach","area_id","toggle","currStatus","next","children","fileName","_jsxFileName","lineNumber","columnNumber","style","border","padding","borderRadius","marginTop","display","gridTemplateColumns","gap","map","r","color","status","area_name","alignItems","width","height","background","added_by_user","fontSize","onClick","disabled","cursor","_c","$RefreshReg$"],"sources":["C:/Users/DAN/Desktop/fullProject/frontend-react/frontend-react/src/components/ShadingPanel.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { listAreasWithShading, attachShading, setShading } from \"../api/shading\";\n\nexport default function ShadingPanel() {\n  const [rows, setRows] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [busy, setBusy] = useState(null);\n\n  const load = async () => {\n    setLoading(true);\n    try {\n      const data = await listAreasWithShading();\n      setRows(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { load(); }, []);\n\n  const ensureAttach = async (area_id) => {\n    try { await attachShading(area_id); } catch {}\n  };\n\n  const toggle = async (area_id, currStatus) => {\n    try {\n      setBusy(area_id);\n      await ensureAttach(area_id);\n      const next = currStatus === \"open\" ? \"closed\" : \"open\";\n      await setShading(area_id, next, true);\n      await load();\n    } finally {\n      setBusy(null);\n    }\n  };\n\n  if (loading) return <div>טוען הצללה...</div>;\n\n  return (\n    <div style={{ border: \"1px solid #eee\", padding: 16, borderRadius: 12 }}>\n      <h3 style={{ marginTop: 0 }}>מערכות הצללה לפי אזור</h3>\n      <div style={{ display: \"grid\", gridTemplateColumns: \"2fr 1fr 1fr 1fr\", gap: 8 }}>\n        <div><strong>אזור</strong></div>\n        <div><strong>סטטוס</strong></div>\n        <div><strong>אינדיקטור</strong></div>\n        <div><strong>פעולה</strong></div>\n        {rows.map(r => {\n          const color = r.status === \"open\" ? \"#22c55e\" : \"#9ca3af\";\n          return (\n            <div key={r.area_id} style={{ display: \"contents\" }}>\n              <div>{r.area_name}</div>\n              <div>{r.status === \"open\" ? \"פתוח\" : \"סגור\"}</div>\n              <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                <span style={{ width: 10, height: 10, borderRadius: \"50%\", background: color, display: \"inline-block\" }} />\n                {r.added_by_user ? (\n                  <span style={{ fontSize: 12, padding: \"2px 8px\", borderRadius: 9999, background: \"#eef\", border: \"1px solid #dde\" }}>\n                    נוסף ע\"י משתמש\n                  </span>\n                ) : null}\n              </div>\n              <div>\n                <button\n                  onClick={() => toggle(r.area_id, r.status)}\n                  disabled={busy === r.area_id}\n                  style={{ padding: \"6px 12px\", borderRadius: 8, border: \"1px solid #ddd\", cursor: busy === r.area_id ? \"not-allowed\" : \"pointer\", background: \"#fafafa\" }}\n                >\n                  {busy === r.area_id ? \"מבצע...\" : (r.status === \"open\" ? \"סגור\" : \"פתח\")}\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}