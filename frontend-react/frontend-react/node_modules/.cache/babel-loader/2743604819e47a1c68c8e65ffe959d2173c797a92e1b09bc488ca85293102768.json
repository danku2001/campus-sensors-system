{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DAN\\\\Desktop\\\\fullProject\\\\frontend-react\\\\frontend-react\\\\src\\\\components\\\\AreaMap.jsx\";\nimport SensorDot from \"./SensorDot.jsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AreaMap({\n  area,\n  sensors = [],\n  adminMode = false,\n  onMoveSensor = () => {},\n  onSelect,\n  // נקבל onSelect לבחירת סנסור\n  onSelectSensor,\n  // תאימות לשם הישן\n  onMapSize = () => {},\n  onPlaceRequest = () => {}\n}) {\n  const img = (area === null || area === void 0 ? void 0 : area.image_url) || null;\n  const handleSelect = onSelect || onSelectSensor || (() => {});\n  function onImgLoad(e) {\n    const nw = e.currentTarget.naturalWidth;\n    const nh = e.currentTarget.naturalHeight;\n    onMapSize(nw, nh);\n  }\n  function onMapClick(e) {\n    if (!adminMode) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const nw = (area === null || area === void 0 ? void 0 : area.width) || rect.width;\n    const nh = (area === null || area === void 0 ? void 0 : area.height) || rect.height;\n    const x = Math.round((e.clientX - rect.left) / rect.width * nw);\n    const y = Math.round((e.clientY - rect.top) / rect.height * nh);\n    onPlaceRequest(x, y);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mapwrap\",\n    onClick: onMapClick,\n    children: [img ? /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"map\",\n      src: img,\n      alt: \"map\",\n      onLoad: onImgLoad\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map\",\n      style: {\n        display: \"grid\",\n        placeItems: \"center\"\n      },\n      children: \"\\u05D0\\u05D9\\u05DF \\u05DE\\u05E4\\u05D4 \\u05DE\\u05D5\\u05D2\\u05D3\\u05E8\\u05EA\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), (sensors || []).map(s => /*#__PURE__*/_jsxDEV(SensorDot, {\n      sensor: s,\n      area: area,\n      adminMode: adminMode,\n      onMoved: onMoveSensor,\n      onSelect: handleSelect // ← רק בחירה לדרואר\n    }, s.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"legend\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"legendItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"legendIcon ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 38\n        }, this), \"\\u05E4\\u05E2\\u05D9\\u05DC\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"legendItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"legendIcon bad\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 38\n        }, this), \"\\u05DB\\u05D1\\u05D5\\u05D9\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"legendItem\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"legendIcon diamond\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 38\n        }, this), \"\\u05D4\\u05E6\\u05DC\\u05DC\\u05D4\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_c = AreaMap;\nvar _c;\n$RefreshReg$(_c, \"AreaMap\");","map":{"version":3,"names":["SensorDot","jsxDEV","_jsxDEV","AreaMap","area","sensors","adminMode","onMoveSensor","onSelect","onSelectSensor","onMapSize","onPlaceRequest","img","image_url","handleSelect","onImgLoad","e","nw","currentTarget","naturalWidth","nh","naturalHeight","onMapClick","rect","getBoundingClientRect","width","height","x","Math","round","clientX","left","y","clientY","top","className","onClick","children","src","alt","onLoad","fileName","_jsxFileName","lineNumber","columnNumber","style","display","placeItems","map","s","sensor","onMoved","id","_c","$RefreshReg$"],"sources":["C:/Users/DAN/Desktop/fullProject/frontend-react/frontend-react/src/components/AreaMap.jsx"],"sourcesContent":["import SensorDot from \"./SensorDot.jsx\";\r\n\r\nexport default function AreaMap({\r\n  area,\r\n  sensors = [],\r\n  adminMode = false,\r\n  onMoveSensor = () => {},\r\n  onSelect,                    // נקבל onSelect לבחירת סנסור\r\n  onSelectSensor,             // תאימות לשם הישן\r\n  onMapSize = () => {},\r\n  onPlaceRequest = () => {},\r\n}) {\r\n  const img = area?.image_url || null;\r\n  const handleSelect = onSelect || onSelectSensor || (() => {});\r\n\r\n  function onImgLoad(e) {\r\n    const nw = e.currentTarget.naturalWidth;\r\n    const nh = e.currentTarget.naturalHeight;\r\n    onMapSize(nw, nh);\r\n  }\r\n\r\n  function onMapClick(e) {\r\n    if (!adminMode) return;\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const nw = area?.width || rect.width;\r\n    const nh = area?.height || rect.height;\r\n    const x = Math.round(((e.clientX - rect.left) / rect.width) * nw);\r\n    const y = Math.round(((e.clientY - rect.top) / rect.height) * nh);\r\n    onPlaceRequest(x, y);\r\n  }\r\n\r\n  return (\r\n    <div className=\"mapwrap\" onClick={onMapClick}>\r\n      {img ? (\r\n        <img className=\"map\" src={img} alt=\"map\" onLoad={onImgLoad} />\r\n      ) : (\r\n        <div className=\"map\" style={{ display: \"grid\", placeItems: \"center\" }}>\r\n          אין מפה מוגדרת\r\n        </div>\r\n      )}\r\n\r\n      {(sensors || []).map((s) => (\r\n        <SensorDot\r\n          key={s.id}\r\n          sensor={s}\r\n          area={area}\r\n          adminMode={adminMode}\r\n          onMoved={onMoveSensor}\r\n          onSelect={handleSelect}   // ← רק בחירה לדרואר\r\n        />\r\n      ))}\r\n\r\n      {/* מקרא */}\r\n      <div className=\"legend\">\r\n        <span className=\"legendItem\"><span className=\"legendIcon ok\"></span>פעיל</span>\r\n        <span className=\"legendItem\"><span className=\"legendIcon bad\"></span>כבוי</span>\r\n        <span className=\"legendItem\"><span className=\"legendIcon diamond\"></span>הצללה</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}